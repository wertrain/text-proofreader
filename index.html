<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
    <link href="style.css" rel="stylesheet"/>
    <link href="./node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"/>
  </head>
  <body>
    <div class="sidenav">
    </div>
    
    <div class="main">
      <div id="editor"></div>
    </div>
  </body>
  <script src="./node_modules/jquery/dist/jquery.min.js"></script>
  <script>window.$ = window.jQuery = require('jquery');</script>
  <script src="./node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
  <script>
    // textlint を require すると、「DevTools failed to parse SourceMap: ***」という警告が出る
    (() => {
      let ace = require('brace');
      require('brace/mode/javascript');
      require('brace/theme/monokai');
      let editor = ace.edit('editor');
      editor.setTheme('ace/theme/monokai');
      editor.on("change", (e) => {
        const textlint = require("textlint");
        const textLineEngine = new textlint.TextLintEngine({
          configFile: '.textlintrc'
        });
        textLineEngine.executeOnText(e, '.txt').then(results => {
          results[0].messages.forEach((message)=> {
            $('.sidenav').append('<a href="#">message</a>');
          });
          process.exit(0);
        })
      });
    })();
  </script>
</html>
