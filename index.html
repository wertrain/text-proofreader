<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
    <link href="style.css" rel="stylesheet"/>
    <link href="./node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"/>
  </head>
  <body>
    <div class="sidenav">
      <a href="#">About</a>
      <a href="#">Services</a>
      <a href="#">Clients</a>
      <a href="#">Contact</a>
    </div>
    
    <div class="main">
      <div id="editor"></div>
    </div>
  </body>
  <script src="./node_modules/jquery/dist/jquery.min.js"></script>
  <script>window.$ = window.jQuery = require('jquery');</script>
  <script src="./node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
  <script>
    var ace = require('brace');
    require('brace/mode/javascript');
    require('brace/theme/monokai');

    const textlint = require("textlint");
    const textLineEngine = new textlint.TextLintEngine({
      configFile: '.textlintrc'
    });
    textLineEngine.executeOnText('実際のHTaML は圧縮されている場合がｶﾝｿｳあるため、実際のHTaML は圧縮されている場合があるため', '.txt').then(results => {
      console.log(results);
    })

    var editor = ace.edit('editor');
    editor.setTheme('ace/theme/monokai');
    editor.on("change", (e) => {
      $('.sidenav').append('<a href="#">About</a>');

          // textlint を require すると、「DevTools failed to parse SourceMap: ***」という警告が出る
      const textlint = window.textlint = require('textlint');
      const promise = textlint.cli.execute('--config .textlintrc', '実際のHTaML は圧縮されている場合がｶﾝｿｳあるため、実際のHTaML は圧縮されている場合があるため');
      console.log(promise.then((text)=>{
        console.log(text);
      }));
    });
  </script>
</html>
